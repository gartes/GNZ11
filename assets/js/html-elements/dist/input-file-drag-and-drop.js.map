{"version":3,"sources":["../src/input-file-drag-and-drop.js"],"names":["dropArea","document","e","dt","files","handleFiles","uploadProgress","progressBar","i","total","tot","console","initializeProgress","reader","img","url","xhr","formData","updateProgress"],"mappings":"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","sourcesContent":["/*******************************************************************************************************************\n *     ╔═══╗ ╔══╗ ╔═══╗ ╔════╗ ╔═══╗ ╔══╗        ╔══╗  ╔═══╗ ╔╗╔╗ ╔═══╗ ╔╗   ╔══╗ ╔═══╗ ╔╗  ╔╗ ╔═══╗ ╔╗ ╔╗ ╔════╗\n *     ║╔══╝ ║╔╗║ ║╔═╗║ ╚═╗╔═╝ ║╔══╝ ║╔═╝        ║╔╗╚╗ ║╔══╝ ║║║║ ║╔══╝ ║║   ║╔╗║ ║╔═╗║ ║║  ║║ ║╔══╝ ║╚═╝║ ╚═╗╔═╝\n *     ║║╔═╗ ║╚╝║ ║╚═╝║   ║║   ║╚══╗ ║╚═╗        ║║╚╗║ ║╚══╗ ║║║║ ║╚══╗ ║║   ║║║║ ║╚═╝║ ║╚╗╔╝║ ║╚══╗ ║╔╗ ║   ║║\n *     ║║╚╗║ ║╔╗║ ║╔╗╔╝   ║║   ║╔══╝ ╚═╗║        ║║─║║ ║╔══╝ ║╚╝║ ║╔══╝ ║║   ║║║║ ║╔══╝ ║╔╗╔╗║ ║╔══╝ ║║╚╗║   ║║\n *     ║╚═╝║ ║║║║ ║║║║    ║║   ║╚══╗ ╔═╝║        ║╚═╝║ ║╚══╗ ╚╗╔╝ ║╚══╗ ║╚═╗ ║╚╝║ ║║    ║║╚╝║║ ║╚══╗ ║║ ║║   ║║\n *     ╚═══╝ ╚╝╚╝ ╚╝╚╝    ╚╝   ╚═══╝ ╚══╝        ╚═══╝ ╚═══╝  ╚╝  ╚═══╝ ╚══╝ ╚══╝ ╚╝    ╚╝  ╚╝ ╚═══╝ ╚╝ ╚╝   ╚╝\n *------------------------------------------------------------------------------------------------------------------\n * @author Gartes | sad.net79@gmail.com | Skype : agroparknew | Telegram : @gartes\n * @date 25.11.2021 15:15\n * @copyright  Copyright (C) 2005 - 2021 Open Source Matters, Inc. All rights reserved.\n * @license    GNU General Public License version 2 or later;\n ******************************************************************************************************************/\n\n/**\n * @see https://medium.com/devschacht/https-medium-com-kasimoka-joseph-zimmerman-drag-drop-file-uploader-vanilla-js-de850d74aa2f\n * @type {HTMLElement}\n */\n\nlet dropArea = document.getElementById(\"drop-area\")\n\n// Prevent default drag behaviors\n;['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {\n dropArea.addEventListener(eventName, preventDefaults, false)\n document.body.addEventListener(eventName, preventDefaults, false)\n})\n\n// Highlight drop area when item is dragged over it\n;['dragenter', 'dragover'].forEach(eventName => {\n dropArea.addEventListener(eventName, highlight, false)\n})\n\n;['dragleave', 'drop'].forEach(eventName => {\n dropArea.addEventListener(eventName, unhighlight, false)\n})\n\n// Handle dropped files\ndropArea.addEventListener('drop', handleDrop, false)\n\nfunction preventDefaults (e) {\n e.preventDefault()\n e.stopPropagation()\n}\n\nfunction highlight(e) {\n dropArea.classList.add('highlight')\n}\n\nfunction unhighlight(e) {\n dropArea.classList.remove('active')\n}\n\nfunction handleDrop(e) {\n var dt = e.dataTransfer\n var files = dt.files\n\n handleFiles(files)\n}\n\nlet uploadProgress = []\nlet progressBar = document.getElementById('progress-bar')\n\nfunction initializeProgress(numFiles) {\n progressBar.value = 0\n uploadProgress = []\n\n for(let i = numFiles; i > 0; i--) {\n  uploadProgress.push(0)\n }\n}\n\nfunction updateProgress(fileNumber, percent) {\n uploadProgress[fileNumber] = percent\n let total = uploadProgress.reduce((tot, curr) => tot + curr, 0) / uploadProgress.length\n console.debug('update', fileNumber, percent, total)\n progressBar.value = total\n}\n\nfunction handleFiles(files) {\n files = [...files]\n initializeProgress(files.length)\n files.forEach(uploadFile)\n files.forEach(previewFile)\n}\n\nfunction previewFile(file) {\n let reader = new FileReader()\n reader.readAsDataURL(file)\n reader.onloadend = function() {\n  let img = document.createElement('img')\n  img.src = reader.result\n  document.getElementById('gallery').appendChild(img)\n }\n}\n\nfunction uploadFile(file, i) {\n var url = 'https://api.cloudinary.com/v1_1/joezimim007/image/upload'\n var xhr = new XMLHttpRequest()\n var formData = new FormData()\n xhr.open('POST', url, true)\n xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest')\n\n // Update progress (can be used to show progress indicator)\n xhr.upload.addEventListener(\"progress\", function(e) {\n  updateProgress(i, (e.loaded * 100.0 / e.total) || 100)\n })\n\n xhr.addEventListener('readystatechange', function(e) {\n  if (xhr.readyState == 4 && xhr.status == 200) {\n   updateProgress(i, 100) // <- Add this\n  }\n  else if (xhr.readyState == 4 && xhr.status != 200) {\n   // Error. Inform the user\n  }\n })\n\n formData.append('upload_preset', 'ujpu6gyk')\n formData.append('file', file)\n xhr.send(formData)\n}\n\n\n\n"],"file":"input-file-drag-and-drop.js"}